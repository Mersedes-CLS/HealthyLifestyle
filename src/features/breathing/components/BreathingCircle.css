/* Container */
.breathing-orb {
  --orb-size: min(660px, 85vh, 85vw);
  position: relative;
  width: var(--orb-size);
  height: var(--orb-size);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

/* Shared layer base */
.breathing-orb__halo,
.breathing-orb__glow--outer,
.breathing-orb__glow--inner {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  transition:
    transform 1.5s ease-in-out,
    opacity 1.5s ease-in-out,
    filter 1.5s ease-in-out;
}

/* Halo: wide soft ambient glow */
.breathing-orb__halo {
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(232, 116, 42, 0.08) 0%, transparent 70%);
  opacity: 0;
}

/* Outer glow */
.breathing-orb__glow--outer {
  width: 66.7%;
  height: 66.7%;
  background: radial-gradient(circle, rgba(232, 116, 42, 0.12) 0%, rgba(232, 116, 42, 0.04) 50%, transparent 70%);
  filter: blur(25px);
  opacity: 0.4;
}

/* Inner glow */
.breathing-orb__glow--inner {
  width: 48.5%;
  height: 48.5%;
  background: radial-gradient(circle, rgba(232, 116, 42, 0.18) 0%, rgba(232, 116, 42, 0.06) 50%, transparent 70%);
  filter: blur(20px);
  opacity: 0.5;
}

/* Core */
.breathing-orb__core {
  position: relative;
  width: 33.3%;
  height: 33.3%;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 40%, #2a1a10, #1a1008 60%, #0f0a05);
  box-shadow:
    0 0 40px rgba(232, 116, 42, 0.1),
    0 0 80px rgba(232, 116, 42, 0.05),
    inset 0 0 30px rgba(232, 116, 42, 0.08);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  z-index: 1;
  transition:
    transform 1.5s ease-in-out,
    box-shadow 1.5s ease-in-out,
    opacity 1.5s ease-in-out,
    background 1.5s ease-in-out;
}

/* ── IDLE ── */
.breathing-orb[data-phase="idle"] .breathing-orb__halo { opacity: 0; }
.breathing-orb[data-phase="idle"] .breathing-orb__glow--outer { transform: scale(0.9); opacity: 0.15; }
.breathing-orb[data-phase="idle"] .breathing-orb__glow--inner { transform: scale(0.9); opacity: 0.2; }
.breathing-orb[data-phase="idle"] .breathing-orb__core { opacity: 0.5; }

/* ── EXHALE (base/default) ── */
.breathing-orb[data-phase="exhale"] .breathing-orb__halo { opacity: 0; }
.breathing-orb[data-phase="exhale"] .breathing-orb__glow--outer { transform: scale(1); opacity: 0.4; }
.breathing-orb[data-phase="exhale"] .breathing-orb__glow--inner { transform: scale(1); opacity: 0.5; }
.breathing-orb[data-phase="exhale"] .breathing-orb__core { transform: scale(1); }

/* ── INHALE — expand ── */
.breathing-orb[data-phase="inhale"] .breathing-orb__halo {
  transform: scale(1.1);
  opacity: 0.6;
}
.breathing-orb[data-phase="inhale"] .breathing-orb__glow--outer {
  transform: scale(1.25);
  opacity: 1;
}
.breathing-orb[data-phase="inhale"] .breathing-orb__glow--inner {
  transform: scale(1.2);
  opacity: 1;
}
.breathing-orb[data-phase="inhale"] .breathing-orb__core {
  transform: scale(1.15);
  background: radial-gradient(circle at 40% 40%, #3a2010, #2a1508 60%, #150c05);
  box-shadow:
    0 0 60px rgba(232, 116, 42, 0.3),
    0 0 120px rgba(232, 116, 42, 0.1),
    inset 0 0 40px rgba(232, 116, 42, 0.15);
}

/* ── HOLD — subtle pulse ── */
.breathing-orb[data-phase="hold"] .breathing-orb__halo { opacity: 0.3; }
.breathing-orb[data-phase="hold"] .breathing-orb__glow--outer { opacity: 0.5; }
.breathing-orb[data-phase="hold"] .breathing-orb__glow--inner { opacity: 0.6; }
.breathing-orb[data-phase="hold"] .breathing-orb__core {
  animation: orb-hold-pulse 2.5s ease-in-out infinite;
}

@keyframes orb-hold-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow:
      0 0 30px rgba(232, 116, 42, 0.1),
      0 0 60px rgba(232, 116, 42, 0.05),
      inset 0 0 25px rgba(232, 116, 42, 0.08);
  }
  50% {
    transform: scale(1.03);
    box-shadow:
      0 0 50px rgba(232, 116, 42, 0.3),
      0 0 100px rgba(232, 116, 42, 0.1),
      inset 0 0 35px rgba(232, 116, 42, 0.15);
  }
}

/* ── RECOVERY — maximum glow ── */
.breathing-orb[data-phase="recovery"] .breathing-orb__halo {
  transform: scale(1.2);
  opacity: 1;
}
.breathing-orb[data-phase="recovery"] .breathing-orb__glow--outer {
  transform: scale(1.35);
  opacity: 1;
}
.breathing-orb[data-phase="recovery"] .breathing-orb__glow--inner {
  transform: scale(1.3);
  opacity: 1;
}
.breathing-orb[data-phase="recovery"] .breathing-orb__core {
  transform: scale(1.2);
  background: radial-gradient(circle at 40% 40%, #442a14, #33200e 60%, #1a1008);
  box-shadow:
    0 0 90px rgba(232, 116, 42, 0.45),
    0 0 160px rgba(232, 116, 42, 0.15),
    inset 0 0 50px rgba(232, 116, 42, 0.2);
}

/* ── Text inside core ── */
.breathing-orb__label {
  font-family: var(--font-mono);
  font-size: 11px;
  font-weight: 400;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--text-secondary);
  transition: color 1.5s ease;
}

.breathing-orb__counter {
  font-family: var(--font-mono);
  font-size: 26px;
  font-weight: 300;
  color: var(--text-primary);
  letter-spacing: 1px;
}

/* Orange label during active phases */
.breathing-orb[data-phase="inhale"]   .breathing-orb__label,
.breathing-orb[data-phase="recovery"] .breathing-orb__label { color: var(--orange-primary); }
.breathing-orb[data-phase="hold"]     .breathing-orb__label { color: rgba(232, 116, 42, 0.7); }

/* ── Start button inside core (idle) ── */
.breathing-orb__start {
  background: transparent;
  border: none;
  padding: 0;
  font-family: var(--font-mono);
  font-size: 12px;
  font-weight: 400;
  letter-spacing: 4px;
  text-transform: uppercase;
  color: var(--orange-primary);
  cursor: pointer;
  animation: fadeIn 0.8s ease both;
  transition: text-shadow 0.3s ease;
}

.breathing-orb__start:hover {
  text-shadow: 0 0 12px rgba(232, 116, 42, 0.6);
}
